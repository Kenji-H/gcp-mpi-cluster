- name: Install common packages
  yum:
    name: [
      'emacs',
      'mpich',
      'mpich-devel',
      'gcc-c++'
    ]
    state: installed
  become: True
  become_method: sudo

- name: Create the MPI user
  user: name=mpiusr comment="MPI user"
  become: True
  become_method: sudo

- name: Create work directory
  file:
    path: "{{ mpi_work_dir }}"
    state: directory
    owner: mpiusr
    group: mpiusr
    recurse: True
  become: True
  become_method: sudo
